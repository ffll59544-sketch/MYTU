const btnPw=document.createElement("button");
    btnPw.className="copy-btn btn-black";
    btnPw.textContent="نسخ الباسورد";
    btnPw.onclick=()=>{copyText(pw);showToast("تم نسخ الباسورد");};

    controls.appendChild(btnEmail);
    controls.appendChild(btnPw);

    row.appendChild(left);
    row.appendChild(controls);
    list.appendChild(row);
  }

  showToast(unique.length+" نتيجة");
}

parseBtn.onclick=parseText;

clearBtn.onclick=()=>{
  input.value="";
  list.innerHTML="";
  showToast("تم المسح");
};

copyAllBtn.onclick=async ()=>{
  const nodes=list.querySelectorAll(".item");
  if(!nodes.length){showToast("لا يوجد شيء");return;}
  const all=[...nodes].map(n=>{
    const em=n.querySelector(".email").textContent.trim();
    const pw=n.querySelector(".pw").textContent.trim();
    return em+":"+pw;
  }).join("\n");
  await copyText(all);
  showToast("تم نسخ الكل");
};

downloadBtn.onclick=()=>{
  const nodes=list.querySelectorAll(".item");
  if(!nodes.length){showToast("لا يوجد شيء");return;}
  const all=[...nodes].map(n=>{
    const em=n.querySelector(".email").textContent.trim();
    const pw=n.querySelector(".pw").textContent.trim();
    return em+":"+pw;
  }).join("\n");
  const blob=new Blob([all],{type:"text/plain"});
  const url=URL.createObjectURL(blob);
  const a=document.createElement("a");
  a.href=url;a.download="emails_passwords.txt";a.click();
  URL.revokeObjectURL(url);
  showToast("تم التنزيل");
};
</script>

</body>
</html>
